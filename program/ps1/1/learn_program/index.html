
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../draw/">
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.1.21">
    
    
      
        <title>RTFSC（框架代码导读） - 2023 级问题求解（程设部分）</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Sans:300,300i,400,400i,700,700i%7CFira+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Fira Sans";--md-code-font:"Fira Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="red">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../../.." title="2023 级问题求解（程设部分）" class="md-header__button md-logo" aria-label="2023 级问题求解（程设部分）" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3 1 9l11 6 9-4.91V17h2V9M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            2023 级问题求解（程设部分）
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              RTFSC（框架代码导读）
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="red"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/PS2023-programming/ps-wiki" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ps-wiki
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        主版
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../start/" class="md-tabs__link">
        指南
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../oj/" class="md-tabs__link">
        OJ
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../" class="md-tabs__link md-tabs__link--active">
        项目
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../lab/" class="md-tabs__link">
        Lab
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../hw/" class="md-tabs__link">
        作业平台
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="2023 级问题求解（程设部分）" class="md-nav__button md-logo" aria-label="2023 级问题求解（程设部分）" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3 1 9l11 6 9-4.91V17h2V9M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82Z"/></svg>

    </a>
    2023 级问题求解（程设部分）
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/PS2023-programming/ps-wiki" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ps-wiki
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../..">主版</a>
          
            <label for="__nav_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          主版
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../schedule/">课程安排</a>
          
            <label for="__nav_1_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1_2">
          <span class="md-nav__icon md-icon"></span>
          课程安排
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../schedule/ps1/" class="md-nav__link">
        第一学期
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../start/">指南</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          指南
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../start/quickstart/" class="md-nav__link">
        快速上手
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../start/beforeps/" class="md-nav__link">
        写在问求之前
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../start/code-style/" class="md-nav__link">
        代码风格
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../start/program/">程序设计基础</a>
          
            <label for="__nav_2_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          程序设计基础
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_2" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_5_2" id="__nav_2_5_2_label" tabindex="0">
          C++ 基础
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_5_2">
          <span class="md-nav__icon md-icon"></span>
          C++ 基础
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/helloworld/" class="md-nav__link">
        Hello, World!
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/basic/" class="md-nav__link">
        C++ 语法基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/var/" class="md-nav__link">
        变量
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/op/" class="md-nav__link">
        运算
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_2_5" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_5_2_5" id="__nav_2_5_2_5_label" tabindex="0">
          流程控制语句
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_5_2_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_5_2_5">
          <span class="md-nav__icon md-icon"></span>
          流程控制语句
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/branch/" class="md-nav__link">
        分支
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/loop/" class="md-nav__link">
        循环
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_2_6" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_5_2_6" id="__nav_2_5_2_6_label" tabindex="0">
          高级数据类型
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_5_2_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_5_2_6">
          <span class="md-nav__icon md-icon"></span>
          高级数据类型
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/array/" class="md-nav__link">
        数组
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/struct/" class="md-nav__link">
        结构体
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/union/" class="md-nav__link">
        联合体
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/pointer/" class="md-nav__link">
        指针
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/func/" class="md-nav__link">
        函数
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/file-op/" class="md-nav__link">
        文件操作
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../lang/csl/">C++ 标准库</a>
          
            <label for="__nav_2_5_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_5_3">
          <span class="md-nav__icon md-icon"></span>
          C++ 标准库
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_3_2" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_5_3_2" id="__nav_2_5_3_2_label" tabindex="0">
          STL 容器
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_5_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_5_3_2">
          <span class="md-nav__icon md-icon"></span>
          STL 容器
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/csl/container/" class="md-nav__link">
        STL 容器简介
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/csl/iterator/" class="md-nav__link">
        迭代器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/csl/sequence-container/" class="md-nav__link">
        序列式容器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/csl/associative-container/" class="md-nav__link">
        关联式容器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/csl/unordered-container/" class="md-nav__link">
        无序关联式容器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/csl/container-adapter/" class="md-nav__link">
        容器适配器
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/csl/algorithm/" class="md-nav__link">
        STL 算法
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/csl/bitset/" class="md-nav__link">
        bitset
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/csl/string/" class="md-nav__link">
        string
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/csl/pair/" class="md-nav__link">
        pair
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_4" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_5_4" id="__nav_2_5_4_label" tabindex="0">
          C++ 进阶
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_5_4">
          <span class="md-nav__icon md-icon"></span>
          C++ 进阶
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/class/" class="md-nav__link">
        类
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/namespace/" class="md-nav__link">
        命名空间
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/value-category/" class="md-nav__link">
        值类别
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/op-overload/" class="md-nav__link">
        重载运算符
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/reference/" class="md-nav__link">
        引用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/const/" class="md-nav__link">
        常值
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/new/" class="md-nav__link">
        新版 C++ 特性
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/lambda/" class="md-nav__link">
        Lambda 表达式
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/optimizations/" class="md-nav__link">
        编译优化
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../lang/cpp-other-langs/" class="md-nav__link">
        C++ 与其他常用语言的区别
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../start/theory/" class="md-nav__link">
        理论环境配置
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../start/learn-more/" class="md-nav__link">
        资源聚集处
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../oj/">OJ</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          OJ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../oj/ps1/">第一学期</a>
          
            <label for="__nav_3_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          第一学期
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_2" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2_2" id="__nav_3_2_2_label" tabindex="0">
          1-0
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_2">
          <span class="md-nav__icon md-icon"></span>
          1-0
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../oj/ps1/1-0/" class="md-nav__link">
        讲义
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../oj/ps1/1-0-sol/" class="md-nav__link">
        题解
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_3" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2_3" id="__nav_3_2_3_label" tabindex="0">
          1-1
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_3">
          <span class="md-nav__icon md-icon"></span>
          1-1
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../oj/ps1/1-1/" class="md-nav__link">
        讲义
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../oj/ps1/1-1-sol/" class="md-nav__link">
        题解
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_4" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2_4" id="__nav_3_2_4_label" tabindex="0">
          1-2
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_4">
          <span class="md-nav__icon md-icon"></span>
          1-2
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../oj/ps1/1-2-sol/" class="md-nav__link">
        题解
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_5" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2_5" id="__nav_3_2_5_label" tabindex="0">
          1-3
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_5">
          <span class="md-nav__icon md-icon"></span>
          1-3
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../oj/ps1/1-3-sol/" class="md-nav__link">
        题解
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_6" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2_6" id="__nav_3_2_6_label" tabindex="0">
          1-4
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_6">
          <span class="md-nav__icon md-icon"></span>
          1-4
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../oj/ps1/1-4-sol/" class="md-nav__link">
        题解
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_7" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2_7" id="__nav_3_2_7_label" tabindex="0">
          1-5
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_7">
          <span class="md-nav__icon md-icon"></span>
          1-5
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../oj/ps1/1-5-sol/" class="md-nav__link">
        题解
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_8" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2_8" id="__nav_3_2_8_label" tabindex="0">
          1-6
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_8">
          <span class="md-nav__icon md-icon"></span>
          1-6
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../oj/ps1/1-6-sol/" class="md-nav__link">
        题解
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_9" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2_9" id="__nav_3_2_9_label" tabindex="0">
          1-7
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_9">
          <span class="md-nav__icon md-icon"></span>
          1-7
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../oj/ps1/1-7-sol/" class="md-nav__link">
        题解
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_10" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2_10" id="__nav_3_2_10_label" tabindex="0">
          1-8
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_10">
          <span class="md-nav__icon md-icon"></span>
          1-8
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../oj/ps1/1-8-sol/" class="md-nav__link">
        题解
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_11" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2_11" id="__nav_3_2_11_label" tabindex="0">
          1-9
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_11_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_11">
          <span class="md-nav__icon md-icon"></span>
          1-9
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../oj/ps1/1-9-sol/" class="md-nav__link">
        题解
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_12" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2_12" id="__nav_3_2_12_label" tabindex="0">
          1-10
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_12_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_12">
          <span class="md-nav__icon md-icon"></span>
          1-10
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../oj/ps1/1-10-sol/" class="md-nav__link">
        题解
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../">项目</a>
          
            <label for="__nav_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          项目
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" checked>
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../">NJU Universalis（问求风云）</a>
          
            <label for="__nav_4_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          NJU Universalis（问求风云）
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_2" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../0/">零：环境配置和上手</a>
          
            <label for="__nav_4_2_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2_2">
          <span class="md-nav__icon md-icon"></span>
          零：环境配置和上手
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../0/getcode/" class="md-nav__link">
        梦开始的地方
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../0/complete_shell/" class="md-nav__link">
        基础设施
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_3" checked>
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">一：Hello, Minitui!</a>
          
            <label for="__nav_4_2_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_4_2_3">
          <span class="md-nav__icon md-icon"></span>
          一：Hello, Minitui!
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          RTFSC（框架代码导读）
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        RTFSC（框架代码导读）
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    代码组织与构建
  </a>
  
    <nav class="md-nav" aria-label="代码组织与构建">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#include" class="md-nav__link">
    头文件和 #include
  </a>
  
    <nav class="md-nav" aria-label="头文件和 #include">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    头文件的搜索路径
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    多源文件程序的构建
  </a>
  
    <nav class="md-nav" aria-label="多源文件程序的构建">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    构建可执行程序的流程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    符号与目标文件编译
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    头文件：接口声明的集合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    重定位与链接
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make" class="md-nav__link">
    运用 Make 进行构建
  </a>
  
    <nav class="md-nav" aria-label="运用 Make 进行构建">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#makefile" class="md-nav__link">
    Makefile 的基本结构
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#makefile_1" class="md-nav__link">
    Makefile 中的模式匹配：* 与 %
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    模式规则
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#makefile_2" class="md-nav__link">
    Makefile 变量
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#makefile_3" class="md-nav__link">
    Makefile 函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    条件语句
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    代码架构
  </a>
  
    <nav class="md-nav" aria-label="代码架构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    代码整体架构大观
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ansih-debugh" class="md-nav__link">
    玩转宏定义：ansi.h 与 debug.h
  </a>
  
    <nav class="md-nav" aria-label="玩转宏定义：ansi.h 与 debug.h">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    条件编译
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitui" class="md-nav__link">
    从结构体到面向对象：Minitui 组件库
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    附录：本篇思考题汇总
  </a>
  
    <nav class="md-nav" aria-label="附录：本篇思考题汇总">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    代码组织与构建
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    玩转宏定义
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    面向对象初步
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    附加题
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    附录：跨平台构建机制
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../draw/" class="md-nav__link">
        组件管理与绘制
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../event/" class="md-nav__link">
        用户输入与事件
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_4" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../2/">二：地图编辑器</a>
          
            <label for="__nav_4_2_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2_4">
          <span class="md-nav__icon md-icon"></span>
          二：地图编辑器
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../2/layout/" class="md-nav__link">
        多组件与布局
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../2/map/" class="md-nav__link">
        地图显示与编辑
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../2/serialization/" class="md-nav__link">
        地图数据持久化
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../lab/">Lab</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Lab
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../hw/">作业平台</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          作业平台
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    代码组织与构建
  </a>
  
    <nav class="md-nav" aria-label="代码组织与构建">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#include" class="md-nav__link">
    头文件和 #include
  </a>
  
    <nav class="md-nav" aria-label="头文件和 #include">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    头文件的搜索路径
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    多源文件程序的构建
  </a>
  
    <nav class="md-nav" aria-label="多源文件程序的构建">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    构建可执行程序的流程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    符号与目标文件编译
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    头文件：接口声明的集合
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    重定位与链接
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make" class="md-nav__link">
    运用 Make 进行构建
  </a>
  
    <nav class="md-nav" aria-label="运用 Make 进行构建">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#makefile" class="md-nav__link">
    Makefile 的基本结构
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#makefile_1" class="md-nav__link">
    Makefile 中的模式匹配：* 与 %
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    模式规则
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#makefile_2" class="md-nav__link">
    Makefile 变量
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#makefile_3" class="md-nav__link">
    Makefile 函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    条件语句
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    代码架构
  </a>
  
    <nav class="md-nav" aria-label="代码架构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    代码整体架构大观
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ansih-debugh" class="md-nav__link">
    玩转宏定义：ansi.h 与 debug.h
  </a>
  
    <nav class="md-nav" aria-label="玩转宏定义：ansi.h 与 debug.h">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    条件编译
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minitui" class="md-nav__link">
    从结构体到面向对象：Minitui 组件库
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    附录：本篇思考题汇总
  </a>
  
    <nav class="md-nav" aria-label="附录：本篇思考题汇总">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    代码组织与构建
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    玩转宏定义
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    面向对象初步
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    附加题
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    附录：跨平台构建机制
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="_1">框架代码导读</h1>
<div class="admonition warning">
<p class="admonition-title">难度警示</p>
<p>我们在上手任何任务时都存在一个学习曲线。在项目任务中，尤其是对于零基础的同学，这将会是学习曲线最为陡峭之处。<em>请充分重视第一阶段，否则你很有可能无法完成后续所有阶段。</em></p>
<p>这一部分要求完成的任务很少，而我们仍为它<a href="../../../../schedule/ps1/#_5">安排了一周的时间</a>，<strong>但这不是中间休息时间</strong>。我们希望你能用一周的时间<a href="../../../#_3">认真阅读讲义</a>，并确保理解了框架的代码。</p>
</div>
<div class="admonition info">
<p class="admonition-title">关于 GPT 的使用</p>
<p>请尽量不要让 GPT 等大语言模型直接帮你生成作业代码。你可以让它为你解释讲义中你看不懂的技术细节，也可以让它为你提供某样技术细节的实现乃至示例代码。</p>
<p>但如果你直接让 GPT 生成项目需要添加的代码，可能会有如下几点后果：</p>
<ul>
<li>你可能并不懂 GPT 的代码为何能够工作，这可能令你在后续需要修改该代码时遇到困难。</li>
<li>GPT 的代码可能是错误的，而你没有进行足够的阅读或理解工作，导致你无法进行项目。</li>
</ul>
</div>
<p>RTFSC 是 Reading The Fucking Source Code 的缩写，来自于 <a href="https://zh.wikipedia.org/wiki/%E6%9E%97%E7%BA%B3%E6%96%AF%C2%B7%E6%89%98%E7%93%A6%E5%85%B9">Linus</a> 在邮件中的「友善」嘴臭。</p>
<p>虽然骂人不好，但这话更像自言自语，有如「It's time to read the fucking source code」。它提醒我们：无论是在初步接手一个项目，抑或是遇到了一些疑难杂症时，沉下心来读一读源代码都很可能对我们大有裨益。</p>
<p>但不少同学作为初学者，哪怕对于小型项目的结构和代码都感到一头雾水：为什么有这么多源文件？各种代码文件之间有什么关系？代码里怎么到处都是我没见过的 token 和语法？该怎么编译整个项目？要知道这些问题的答案，必须对一些 C/C++ 的高级语法，以及 C/C++ 项目的构建具有基本的知识。</p>
<p>由此，作为第一阶段的开端，在本部分中我们为大家介绍阅读框架代码所必须的前置知识，并通过阅读代码了解框架代码的大略架构。</p>
<h2 id="_2">代码组织与构建</h2>
<p>在第零阶段我们说过，项目中共有两个可执行文件：游戏和启动器。</p>
<p>启动器是一个单源文件程序，而游戏对应着多份源代码。在 OJ 中，大家也许习惯于编写一个源文件而得到对应的程序，但是对于复杂的项目，只使用一个源文件构建得到一个程序是不现实的。试想如果一个源文件中有着数万乃至数十万行代码，会使得阅读和维护代码变得多么麻烦？</p>
<p>因此，我们需要将代码按照模块分成多个文件。你可以在如下目录下找到游戏的源代码：<code>test/phase1</code> 和 <code>minitui</code>。你还会注意到代码文件分为两类：</p>
<ul>
<li><code>.h</code> 结尾的<strong>头文件</strong>（Header File），一般存放在 <code>include</code> 目录下。</li>
<li><code>.cpp</code> 结尾的<strong>源文件</strong>（Source File），一般存放在 <code>source</code> 目录下。</li>
</ul>
<p>下面我们来细讲一下这两类文件的区别和作用，并介绍一下预编译命令以及代码的构建流程。</p>
<h3 id="include">头文件和 <code>#include</code></h3>
<p>你每次编写的代码的第一行都有可能是 <code>#include &lt;cstdio&gt;</code> 或 <code>#include &lt;iostream&gt;</code> 乃至 <code>#include &lt;bits/stdc++.h&gt;</code>。这些尖括号内的文件就是标准库为我们提供的头文件。</p>
<p>头文件的作用是提供变量的 <code>extern</code> 声明和<a href="../../../../lang/func/">函数声明</a>（这些声明的具体作用我们后面讨论），它一般通过 <code>#include</code> 命令而被引入到程序中（这种引入就是文本替换，并可以递归）。</p>
<p><code>#include</code> 这种以 <code>#</code> 起始的命令叫做<strong>预编译命令</strong>。处理预编译命令是 C/C++ 源文件编译流程的第一步，我们在此后还会遇见其它的预编译命令，它们同样具有重要作用。</p>
<details class="example" open="open">
<summary>观察 <code>#include</code> 命令的作用和预编译过程</summary>
<p>你可以写一个简单的 Hello World 程序（<code>hello.cpp</code>），并使用如下命令指示编译器进行预编译：</p>
<div class="highlight"><pre><span></span><code>g++<span class="w"> </span>-E<span class="w"> </span>hello.cpp<span class="w"> </span>-o<span class="w"> </span>hello_pre.cpp
</code></pre></div>
<p>观察 <code>hello_pre.cpp</code>，你发现了什么？</p>
</details>
<h4 id="_3">头文件的搜索路径</h4>
<p>在引用头文件如 <code>cstdio.h</code> 时，我们发现头文件既不在代码文件对应的目录下，也不在 <code>PATH</code> 环境变量所指定的路径下，GCC 到底是从哪里找到这个文件的呢？</p>
<p>如果你使用带语法提示的编辑器或 IDE，那么在代码文件中你可能发现引用诸如 <code>ansi.h</code> 或 <code>basics.h</code> 时会被标红线，提示找不到该文件，但编译时却可以通过，这是为什么呢？</p>
<p>这些都和 <code>#include&lt;$FILE&gt;</code> 时编译器的搜索路径有关。在这一格式的命令中，编译器会从标准库 <code>include</code> 路径下寻找对应的文件，然后从用户指定的 <code>include</code> 路径中寻找文件。如果你执行 <code>echo | gcc -xc++ -E -v -</code> 命令，你将会看到：</p>
<div class="highlight"><pre><span></span><code><span class="c1">#include &lt;...&gt; search starts here:</span>
<span class="w"> </span>/usr/lib/gcc/x86_64-pc-msys/11.3.0/include/c++
<span class="w"> </span>/usr/lib/gcc/x86_64-pc-msys/11.3.0/include/c++/x86_64-pc-msys
<span class="w"> </span>/usr/lib/gcc/x86_64-pc-msys/11.3.0/include/c++/backward
<span class="w"> </span>/usr/lib/gcc/x86_64-pc-msys/11.3.0/include
<span class="w"> </span>/usr/lib/gcc/x86_64-pc-msys/11.3.0/include-fixed
<span class="w"> </span>/usr/include
<span class="w"> </span>/usr/lib/gcc/x86_64-pc-msys/11.3.0/../../../../lib/../include/w32api
</code></pre></div>
<p>要想增加 <code>#include&lt;&gt;</code> 的搜索路径，可以使用 GCC 提供的 <code>-I</code> 选项，试试执行 <code>echo | gcc -xc++ -E -v -I . -</code>，输出结果出现了什么不同？</p>
<h3 id="_4">多源文件程序的构建</h3>
<p><em>本部分为了切合大家的学习阶段作了简化。在《计算机系统基础》中大家会学习到更详细的内容。</em></p>
<h4 id="_5">构建可执行程序的流程</h4>
<p>在<a href="http://cslabcms.nju.edu.cn/problem_solving/images/a/a1/Lecture1-6_2019-11-12_%E5%A6%82%E4%BD%95%E5%B0%86%E7%AE%97%E6%B3%95%E5%91%8A%E8%AF%89%E8%AE%A1%E7%AE%97%E6%9C%BA.pptx">理论课堂</a>上，我们已经知道了「将程序告诉计算机」的方式——二进制代码。在课堂上，我们还看到了编程语言从机器语言、汇编语言再到高级程序设计语言的演进。</p>
<p>而在可执行程序的构建中，我们则是反其道而行之——从高级程序设计语言的源文件，得到汇编语言文件，再得到二进制代码文件。</p>
<p>但是，对于多源文件的程序，它又是怎么样构建成一个二进制程序的呢？是先合并源代码，再统一翻译，还是在每份源代码翻译之后链接呢？下面我们就来介绍。</p>
<p>多源文件程序的构建流程大体可分为预处理、编译、汇编、链接四个步骤，前三步是每份源代码独立经历的。构建只针对源文件而不直接针对头文件。</p>
<ul>
<li>预处理 <code>cpp</code>：在这一步，源文件所有的 <code>#</code> 预编译命令都被展开。头文件在此步被引入。</li>
<li>编译 <code>ccl</code>：在这一步，预处理后的源文件被<strong>分别</strong>编译成汇编代码文件。</li>
<li>汇编 <code>as</code>：在这一步，汇编代码文件被<strong>分别</strong>编译为可重定位目标文件（<code>.o</code> 文件），在 Windows 平台上，它是 <a href="https://en.wikipedia.org/wiki/COFF0">COFF 格式</a>，在 Linux 平台上，它是 <a href="https://en.wikipedia.org/wiki/Executable_and_Linkable_Format">ELF 格式</a>。</li>
<li>链接 <code>ld</code>：在这一步，多个可重定位目标文件被<strong>链接</strong>成一个完整的可执行文件，在 Windows 平台上，它是 <a href="https://en.wikipedia.org/wiki/Portable_Executable">PE 格式</a>，即常见的 exe 程序，在 Linux 平台上，它仍是 <a href="https://en.wikipedia.org/wiki/Executable_and_Linkable_Format">ELF 格式</a>。</li>
</ul>
<p>上述流程可以被表示为：</p>
<p><img alt="构建流程" src="../../../../pics/project-1-1.png" /></p>
<p>GCC 提供了细粒度地控制构建流程的选项，展示如下：</p>
<div class="highlight"><pre><span></span><code>-E      Preprocess only; do not compile, assemble or link.
-S      Compile only; do not assemble or link.
-c      Compile and assemble, but do not link.
</code></pre></div>
<p>在现阶段，我们不是很关心预处理、编译所得到的中间产物。因此为方便起见，我们把预处理、编译、汇编三步（图上显示的「翻译器」过程）统称为编译，即把一个源代码文件翻译成一个目标文件的过程。</p>
<p>多源文件的编程事实上是一种<strong>模块化编程</strong>。我们把每个源文件对应的部分称为一个<strong>模块</strong>。</p>
<h4 id="_6">符号与目标文件编译</h4>
<p>容易推想，在模块化编程中，模块之间不可能是完全相互独立的：一个模块可能需要用到别的模块的<strong>全局变量</strong>或函数，也可能需要提供变量和函数供其他模块使用。</p>
<p>我们把函数和变量统称为<strong>符号</strong>，上面的问题可以被总结为跨模块的<strong>符号引用</strong>。</p>
<details class="question" open="open">
<summary>符号引用在做什么？</summary>
<p>调用函数、使用全局变量本质上都是通过它们的<strong>地址</strong>进行的。引用符号就是在引用符号的<strong>地址</strong>。</p>
</details>
<p>但是，编译器在把源代码编译为目标文件之前，并不知道这个目标文件会和哪些模块链接，更不知道那些模块会有哪些符号，在编译器看来，只有在文件中<strong>声明了</strong>的符号才能被使用。</p>
<p>声明的作用是<strong>告诉编译器一个符号的引用方法</strong>。你得告诉编译器，这个符号是函数还是变量，是什么类型，有哪些参数？否则编译器无从使用它。</p>
<p>声明包括名称（也就是函数或变量名），类型（变量类型或函数原型），性质（静态/全局）。声明的实现（即<strong>定义</strong>，函数定义或全局变量的初始化）可以位于本模块中（<strong>强符号</strong>），也可以不位于本模块中（<strong>弱符号</strong>）。</p>
<details class="info" open="open">
<summary>外部变量的声明</summary>
<p>未赋初始值的变量默认视为一个弱符号。如果想显式表明一个变量是一个弱符号，使用 <code>extern</code> 关键字。</p>
</details>
<p>对于那些在本模块中无法确定其绝对地址或者相对地址的符号，编译器会留下重定位信息（即 <code>.rel.text</code> 和 <code>.rel.data</code> 节），要求链接器在链接时为自己替换模块中的符号引用地址（即<strong>重定位</strong>）。另外，对于声明过的所有强符号或弱符号，编译器都会将它们的信息写入目标文件，以供链接器使用。这样生成的文件就是<strong>可重定位目标文件</strong>。</p>
<h4 id="_7">头文件：接口声明的集合</h4>
<p>一个模块可能实现了若干它希望被其他模块使用的函数和变量，我们把它们称作<strong>接口</strong>。当其他模块需要使用接口时，需要提供接口的声明。比如，<code>stdio</code> 模块实现了函数 <code>puts</code>，那么其他模块使用该函数时，就需要写上 <code>puts</code> 的声明，即 <code>int puts(const char *)</code>：</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="nf">puts</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="p">);</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">puts</span><span class="p">(</span><span class="s">&quot;Hello, world!&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>这样，编译器就会将 <code>puts</code> 视为一个外部符号，并要求链接器在重定位时再将其改为具体的符号引用。</p>
<p>但是对于模块的使用者而言，逐个写出需要使用的模块符号声明显然不现实：不仅麻烦，而且使用者可能根本不知道符号的具体声明（如果模块编写者不公布源代码又没有对应的文档）。因此，模块编写者将所有接口的声明都写入一个头文件，并且公布出来供使用模块的人直接通过 <code>#include</code> 方式包含进其源代码。</p>
<details class="question" open="open">
<summary>为什么可以不提供模块的源代码？</summary>
<p>因为模块编译过程是互相独立的，因此模块作者可以只提供模块的目标文件供使用者链接即可。</p>
<p>我们把这种不公布源代码的行为叫做<strong>闭源</strong>，反之称作<strong>开源</strong>（open source）。</p>
</details>
<p>对于 <code>stdio</code> 模块，对应其接口声明的头文件就是 <code>stdio.h</code>（C）或 <code>cstdio</code>（C++），里面包含了所有 <code>stdio</code> 接口的声明，<code>puts</code> 自然也在其中。于是，我们可以修改上文看到的 Hello World 程序：</p>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">puts</span><span class="p">(</span><span class="s">&quot;Hello, world!&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>这就是我们所常见的 Hello World 程序的形式了。经由上述内容，我们写代码必带的头文件总算解开了其神秘的面纱：它是对应模块接口声明的集合。</p>
<h4 id="_8">重定位与链接</h4>
<details class="question" open="open">
<summary>为什么通过链接来合并模块，而非直接合并模块的源代码一次性编译？</summary>
<ul>
<li><strong>节约构建时间。</strong>如果合并源码编译，那么每进行一次修改，就要重新完整编译一次项目（甚至连着标准库的源码一起）。如果每个模块分别编译可以只重新编译改变了的模块，并重新进行链接。</li>
<li><strong>允许闭源提供模块。</strong>有些商业公司并不希望你在使用他们开发的模块时得到他们的高级语言源码，直接提供二进制模块文件可以避免这一点。</li>
<li><strong>方便动态链接。</strong>如果编译前就需要知道所有模块的源代码，那么无法进行动态链接，相同模块的二进制代码无法在运行时复用。</li>
</ul>
</details>
<details class="example" open="open">
<summary>手动构建项目</summary>
<p>之前我们说过可以通过 <code>make -n</code> 来查看项目构建时 <code>make</code> 运行的命令。</p>
<p>假设 <code>make</code> 不存在，你应该如何构建整个项目呢？既然你已经了解了项目构建的流程了，不妨动手试试看。</p>
</details>
<h3 id="make">运用 Make 进行构建</h3>
<p>一条条手动运行构建项目的命令既麻烦又容易出错。我们在<a href="../../0/complete_shell">第零阶段</a>介绍了可用于构建的自动化工具 Make 来帮我们解决这一难题。在学习了构建项目的流程之后，现在我们进一步学习如何利用 Make 来自动化构建项目。</p>
<p>首先，在某一目录下执行 <code>make</code> 命令时，<code>make</code> 会自动寻找指定目录（默认是当前目录，当然也可以通过 <code>-C DIRECTORY</code> 指定）下寻找 <code>Makefile</code> 或 <code>makefile</code> 文件，并按照其中的指示来执行项目的构建。可以看出，运用 Make 的核心就是学会编写 Makefile。</p>
<p>我们接下来简要介绍一下编写 Makefile 的基础知识。</p>
<h4 id="makefile">Makefile 的基本结构</h4>
<p>我们首先介绍 Makefile 中的几个核心概念：</p>
<ul>
<li><strong>目标（target）。</strong>表示一个 Makefile 需要生成的文件。</li>
<li><strong>依赖（prerequisites）。</strong>表示目标所依赖的文件（可以是其他目标）。</li>
<li><strong>制法（recipe）。</strong>表示生成一个目标需要执行的命令。</li>
</ul>
<p>以上三部分合起来描述了目标及目标的生成方法，并构成了 Makefile 的一个基本执行单元（本文称其为「规则」），格式如下：</p>
<div class="highlight"><pre><span></span><code><span class="nf">target ... </span><span class="o">:</span><span class="w"> </span><span class="n">prerequisites</span> ...
<span class="w">    </span>recipe
<span class="w">    </span>...
</code></pre></div>
<p>当执行 <code>make</code> 时，Make 会自动寻找文件中第一个出现的目标并以它为生成目标。你也可以用 <code>make target</code> 来指定 Make 的生成目标。</p>
<p>Makefile 生成一个目标时，会先检查依赖是否存在，或者是需要构建的目标，如果是需要构建的目标则递归生成目标。</p>
<p>然后 Makefile 检查目标及所有依赖的更新时间，如果目标文件不存在，亦或者某一依赖的最后修改时间比目标的最后修改时间要迟，那么 Makefile 就会执行制法中指定的命令。</p>
<p>Makefile 中还可以定义所谓的<strong>伪目标</strong>。伪目标的目标名并不是真正的文件，而只是一个<em>操作名</em>，它被 Makefile 生成时不会产生对应的目标文件，只会执行对应的制法。Makefile 会试图自动识别哪些目标是伪目标，你也可以用 <code>.PHONY: targets</code> 来指定。</p>
<details class="info" open="open">
<summary>注意缩进</summary>
<p>Make 对 Makefile 中的缩进敏感。<code>recipe</code> 的内容需要有一个 Tab 的缩进。 </p>
</details>
<details class="info" open="open">
<summary>附加依赖</summary>
<p>Makefile 的语法很灵活。你可以在定义一个规则的前后为目标添加其它依赖。语法形如 <code>target ... : prerequisites ...</code>，不需要添加 <code>recipe</code>。</p>
</details>
<details class="example" open="open">
<summary>结合实际</summary>
<p>试试阅读项目的 Makefile，你发现了哪些目标？这些目标的依赖关系是怎样的？哪些目标是伪目标？</p>
<p>你现在可能还看不懂部分 <code>$(OBJ)</code> 之类的变量名，可以暂时跳过它们。</p>
</details>
<h4 id="makefile_1">Makefile 中的模式匹配：<code>*</code> 与 <code>%</code></h4>
<p>大家也许在理论课堂上已经学过了正则表达式或类似的模式匹配机制。模式匹配能令我们利用计算机迅速筛选出一类符合要求的字符串。</p>
<p>最常用的模式匹配方法是利用通配符来匹配：一个通配符可以匹配空串或任意大小的串，也即「通用匹配」，相当于<a href="https://www.runoob.com/regexp/regexp-tutorial.html">正则表达式</a>中的 <code>.*</code>。在多数场景中，通配符是 <code>*</code>，可以试试在项目根目录执行 <code>echo minitui/include/*.h</code>，感受一下通配符的作用。</p>
<p>而在 Makefile 中，通配符是 <code>%</code> 或 <code>*</code>。其中，<code>%</code> 是一个「对应」的通配符——在同一上下文中，<code>%</code> 匹配一次后，后续出现的 <code>%</code> 代表着和第一个 <code>%</code> 相同的值。于是，后续多个含有 <code>%</code> 的模式就像是一种以通配字符串为词根的「派生模式」。</p>
<p>上述模式能方便地用于进行<strong>模式替换</strong>（将匹配串替换为某一派生串）和<strong>模式规则定义</strong>（一种为某一模式的目标批量定义规则的方法，其中依赖由目标的派生串指定）。我们会在后面提及它们。</p>
<h4 id="_9">模式规则</h4>
<p>Makefile 具有为同一模式的文件批量类似的规则的功能，我们将其称为模式规则。模式规则利用 <code>%</code> 通配符匹配某一规则的目标，然后对它进行派生以得到依赖列表。举个简单的例子，我们希望将所有的 <code>.c</code> 文件编译为同目录下的同名 <code>.o</code> 文件，于是我们可以写出这样的模式规则：</p>
<div class="highlight"><pre><span></span><code><span class="nf">%.o </span><span class="o">:</span><span class="w"> </span>%.<span class="n">c</span>
<span class="w">    </span>gcc<span class="w"> </span>%.c<span class="w"> </span>-o<span class="w"> </span>%.o
</code></pre></div>
<p>然而很遗憾，以上规则并不能运作，因为 Make 不会将 Recipe 中的 <code>%</code> 进行替换，要在 Recipe 中引用目标名、依赖名、「词根」等，我们必须引入所谓<strong>特殊变量</strong>，以下是一些常用的特殊变量：</p>
<ul>
<li><code>$@</code>：目标。</li>
<li><code>$&lt;</code>：第一个依赖。</li>
<li><code>$^</code>：所有的依赖（去重）。</li>
<li><code>$+</code>：所有的依赖（不去重）。</li>
<li><code>$?</code>: 所有比目标更新的依赖。</li>
<li><code>$*</code>: 「词根」，即 <code>%</code> 匹配的字符串。</li>
</ul>
<p>于是我们可以改写上面的规则作：</p>
<div class="highlight"><pre><span></span><code><span class="nf">%.o </span><span class="o">:</span><span class="w"> </span>%.<span class="n">c</span>
<span class="w">    </span>gcc<span class="w"> </span>$&lt;<span class="w"> </span>-o<span class="w"> </span><span class="nv">$@</span>
</code></pre></div>
<p>这样我们就为所有 <code>.c</code> 结尾的文件定义了一个编译规则。</p>
<h4 id="makefile_2">Makefile 变量</h4>
<p>我们在上文提及了一些 Makefile 的特殊变量，现在我们来详细介绍一下 Makefile 变量。</p>
<p>Makefile 的变量本质上是字符串，引用变量的方式是 <code>$</code>，如果一个变量名是 <code>VAR</code>，对其值的引用就是 <code>$(VAR)</code>。</p>
<p>变量可按照四种方法进行定义：</p>
<ul>
<li><strong>递归赋值。</strong><code>VAR=EXPR</code> 表示定义 <code>VAR</code> 为 <code>EXPR</code>，<code>EXPR</code> 中可以含有变量，其值使用的是<strong>最终的</strong>变量值。也就是会递归计算完引用的变量的变量值再计算 <code>VAR</code> 的值。<em>这种方法可能导致死循环，应当避免循环引用。</em></li>
<li><strong>直接赋值。</strong><code>VAR:=EXPR</code> 同样表示定义 <code>VAR</code> 为 <code>EXPR</code>，但引用变量使用的是<strong>当前的</strong>变量值。</li>
<li><strong>追加赋值。</strong><code>VAR+=EXPR</code> 表示在 <code>VAR</code> 的后面添加一个空格和 <code>EXPR</code> 的值。引用的变量如果未定义，则采用递归赋值风格，否则以该变量定义时使用的赋值风格为准。</li>
<li><strong>缺省赋值。</strong><code>VAR?=EXPR</code> 表示当 <code>VAR</code> 此时未定义时将 <code>VAR</code> 定义为 <code>EXPR</code>。</li>
</ul>
<p>Makefile 中可以使用系统内的环境变量。但同名变量以 Makefile 内定义的为优先。</p>
<p>同时，变量还有作用域之分。普通定义的变量是只在本文件中生效的，而有些变量则是<strong>可继承的</strong>，在 recipe 中执行的 <code>make</code> 子进程会继承它们的值。为定义可继承的变量，可以利用 <code>export</code> 关键字来修饰变量定义，或在 <code>make</code> 时利用 <code>make VAR=XXX</code> 指定变量的值。另外，可以用 <code>override</code> 关键字来覆盖从父进程继承的变量。</p>
<p>值得一提的是，Makefile 中还有变量内联模式替换的语法，如 <code>$(VAR:%.o=%.c)</code> 能将所有 <code>VAR</code> 中 <code>.o</code> 结尾的元素替换为 <code>.c</code> 结尾。</p>
<details class="question" open="open">
<summary>什么是元素？</summary>
<p>在 Makefile 中，元素是字符串（变量或常量）中以空格为边界的子串（其实一般把它们叫做 token，这里姑且译作元素）。下文将字符串作为函数参数时，它被视为以空格分隔的元素的列表。当我们需要组合多个元素时，也将它们用空格分隔拼接成字符串（比如上文<code>$^</code>，在引用它时所有依赖就以空格组合为一个字符串）。</p>
</details>
<h4 id="makefile_3">Makefile 函数</h4>
<p>Makefile 还有一些内置函数供编写者引用。函数引用的格式和变量引用相似，即 <code>$(func args...)</code>，其中参数按照要求以逗号分隔。我们列举几个典型的内置函数，其他的内置函数大家在碰到时自行搜索或者在文档中查询：</p>
<ul>
<li>字符串/路径处理函数。<ul>
<li><code>$(basename STRS)</code> 将 STRS 每个元素去除后缀名后的结果返回。</li>
<li><code>$(patsubst PAT1, PAT2, STRS)</code> 将 STRS 中符合模式 PAT1 的元素替换为模式 PAT2 后返回。</li>
<li><code>$(addprefix PREFIX, STRS)</code>，将 STRS 的所有元素添加 PREFIX 作为前缀后返回。 </li>
<li><code>$(wildcard PAT)</code>，将搜索路径中所有符合 PAT 模式的路径或文件名返回。</li>
</ul>
</li>
<li>打印输出函数。<ul>
<li><code>$(error MSG)</code>。</li>
<li><code>$(warning MSG)</code>。</li>
<li><code>$(echo MSG)</code>。</li>
</ul>
</li>
<li>Shell 调用函数。<ul>
<li><code>$(shell cmd)</code>，执行 <code>cmd</code> 对应的 Shell 命令，并将其输出的内容返回。
<br /><em>注意命令中的 <code>$</code> 需用 <code>$$</code> 转义。</em></li>
</ul>
</li>
</ul>
<details class="example">
<summary>结合实际</summary>
<p>阅读项目代码，现在你能够看懂项目</p>
</details>
<h4 id="_10">条件语句</h4>
<p>Makefile 具有通过条件语句选择性保留代码的功能。其基本格式如下：</p>
<div class="highlight"><pre><span></span><code>if-statement (condition)
    ...
else
    ...
endif
</code></pre></div>
<p>条件语句包含的代码可以是变量声明/定义等，也可以是 <code>recipe</code> 中的内容。在实际执行时，只有满足条件的代码会被保留。</p>
<p>条件语句具有四种形式的 <code>if-statement</code>：</p>
<ul>
<li><code>ifdef ()</code></li>
<li><code>ifndef ()</code></li>
<li><code>ifeq</code></li>
<li><code>ifneq</code></li>
</ul>
<details class="example" open="open">
<summary>结合实际</summary>
<p>阅读项目 Makefile 中的条件语句，你觉得它们起到了什么功能？</p>
</details>
<details class="note" open="open">
<summary>进一步学习</summary>
<p>要进一步了解 Makefile 的编写和 Make 的使用，可以参考两样资料。</p>
<ul>
<li><a href="https://www.gnu.org/software/make/manual/make.html">GNU make 官方文档</a>。这里有对于 Make 和 Makefile 用法和规范的最详尽和权威的描述。</li>
<li><a href="../../../../files/Makefile.pdf">跟我一起写 Makefile</a>。这是一个初学者友好，循序渐进的中文教程。上文介绍 Makefile 的内容也参考了此教程。<em>该教程的作者<a href="https://coolshell.cn/haoel/">陈皓</a>于 2023 年 5 月猝然去世。R. I. P.</em>。</li>
</ul>
</details>
<div class="admonition abstract">
<p class="admonition-title">Makefile 思考题</p>
<p>结合上文所述的 Makefile 基本知识和项目 Makefile 的代码内容，完成如下思考题：</p>
<ul>
<li>
<p>指出 <code>Makefile</code> 中 <code>CXXFLAGS</code> 变量最终的值。假设要为游戏的所有源代码文件增加一个 <code>common/include</code> 的 <code>#include</code> 搜索路径，应该如何修改 <code>Makefile</code> （当然，你不要真的修改 <code>Makefile</code>）？</p>
</li>
<li>
<p><code>ansi.h</code> 并未被 <code>Makefile</code> 文件中的代码指定为任何目标的依赖，本身也没有被指定为目标。为什么在修改 <code>ansi.h</code> 后，执行 <code>make compile</code> 会导致部分源代码被重新编译？或者说，<code>Makefile</code> 是如何识别头文件依赖的？你的回答应该尽可能详细。
<br /><em>提示：查看编译后 <code>build</code> 目录下的 <code>*.d</code> 文件，并查阅 <code>g++</code> 中 <code>-MMD</code> 命令的作用。</em></p>
</li>
</ul>
</div>
<h2 id="_11">代码架构</h2>
<h3 id="_12">代码整体架构大观</h3>
<h3 id="ansih-debugh">玩转宏定义：<code>ansi.h</code> 与 <code>debug.h</code></h3>
<h4 id="_13">条件编译</h4>
<p>条件编译是代码跨平台的重要保证。</p>
<h3 id="minitui">从结构体到面向对象：Minitui 组件库</h3>
<p>大家在 OJ 的练习中，一定已经使用过了结构体的语法。我们现在来回顾一下结构体的定义：</p>
<ul>
<li>结构体是一个自定义数据类型。我们知道 C/C++ 中有一些<em>基础数据类型</em>，如 <code>int</code>, <code>float</code></li>
</ul>
<h2 id="_14">附录：本篇思考题汇总</h2>
<h3 id="_15">代码组织与构建</h3>
<ul>
<li>假设现欲添加一个名为 <code>glob_value</code> 的 <code>int</code> 类型全局变量，并要求源代码通过包含一个头文件 <code>glob_value.h</code> 就可以访问该变量，<code>glob_value.h</code> 里应该如何写？源代码应该作何修改（可以添加新文件）？</li>
<li>指出 <code>Makefile</code> 中 <code>CXXFLAGS</code> 变量最终的值。假设要为游戏的所有源代码文件增加一个 <code>common/include</code> 的 <code>#include</code> 搜索路径，应该如何修改 <code>Makefile</code> （当然，你不要真的修改 <code>Makefile</code>）？</li>
<li><code>ansi.h</code> 并未被 <code>Makefile</code> 文件中的代码指定为任何目标的依赖，本身也没有被指定为目标。为什么在修改 <code>ansi.h</code> 后，执行 <code>make compile</code> 会导致部分源代码被重新编译？或者说，<code>Makefile</code> 是如何识别头文件依赖的？你的回答应该尽可能详细。
<br />提示：查看编译后 <code>build</code> 目录下的 <code>*.d</code> 文件，并查阅 <code>g++</code> 中 <code>-MMD</code> 命令的作用。</li>
</ul>
<h3 id="_16">玩转宏定义</h3>
<ul>
<li><code>"\033[?1049h"</code> 可以启用所谓的备用缓冲区。请用 <code>ansi.h</code> 中定义的宏写出启用备用缓冲区的代码，你的代码应该尽可能短。</li>
<li>解释 <code>## __VA_ARGS__</code> 的意思。为什么 <code>debug.h</code> 中使用 <code>## __VA_ARGS__</code> 而不是 <code>__VA_ARGS__</code> ？</li>
<li>假设现欲兼容 MacOS，原来的条件编译代码可以写为：
<div class="highlight"><pre><span></span><code><span class="cp">#ifdef _WIN64</span>
<span class="c1">// some code functions in Windows</span>
<span class="cp">#else</span>
<span class="c1">// some code functions in Linux</span>
<span class="cp">#endif</span>
</code></pre></div>
兼容 MacOS 后，条件编译代码应该写作什么形式？</li>
</ul>
<h3 id="_17">面向对象初步</h3>
<ul>
<li>列出 <code>mainscr</code> 类的所有成员变量和函数，并分别指出它们是被继承关系上的哪个类定义的。如果是虚函数，分别指出该虚函最初继承自哪个抽象类，并是在哪个类被实现的？</li>
<li>菱形继承和虚继承是 C++ 继承机制中最麻烦的一环，容易产生错综复杂，难以理清的编译问题。上网查询资料，哪些面向对象的高级语言对此进行了改进？进行了什么改进？</li>
</ul>
<h3 id="_18">附加题</h3>
<ul>
<li>学习 <code>sed</code>。<code>Makefile</code> 编译 <code>%.cpp</code> 时采用了如下规则：
<div class="highlight"><pre><span></span><code><span class="nf">$(BUILD_DIR)/%.o </span><span class="o">:</span><span class="w"> </span>%.<span class="n">cpp</span>
<span class="c">    # ...</span>
<span class="w">    </span>@sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s/[A-Z]:\//\/\l&amp;/g&#39;</span><span class="w"> </span><span class="k">$(</span>patsubst<span class="w"> </span>%.o,<span class="w"> </span>%.d,<span class="w"> </span><span class="nv">$@</span><span class="k">)</span>
<span class="w">    </span>@sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s/:\//\//g&#39;</span><span class="w"> </span><span class="k">$(</span>patsubst<span class="w"> </span>%.o,<span class="w"> </span>%.d,<span class="w"> </span><span class="nv">$@</span><span class="k">)</span>
</code></pre></div>
请问这两行 <code>sed</code> 命令目的为何？<br />学习 <code>cygpath</code> 命令的使用，请给出一种更好的达成前述目的的方案。</li>
</ul>
<!-- +（面向对象初步）现有一个基类 `Foo` 及其派生类 `Bar`，我们有如下代码：
```cpp
struct Foo {
    // some code
    const char *instanceOf() const {
        return "Foo";
    }
};
struct Bar {
    //some code
    const char *instanceof() const {
        return "Bar";
    }
}
``` -->
<!-- +（面向对象初步，开放题）如果有两个类 B、C 继承了 A，同时又有一个类 D 继承了 B、C，你觉得会引发什么问题？你觉得这体现出了继承机制的什么缺陷？上网查询资料，其他面向对象的高级语言对此进行了什么改进？ -->

<h2 id="_19">附录：跨平台构建机制</h2>
<p>部分不了解电脑的用户可能会问：为什么电脑上的程序，手机不能运行？而许多 Mac 用户也许还会问：为什么其他电脑的程序，苹果电脑不能运行？</p>
<p>稍微熟悉电脑的用户会知道：这是因为平台差异导致的。平台差异是可以是操作系统的差异，也可以是<a href="https://zh.wikipedia.org/wiki/%E6%8C%87%E4%BB%A4%E9%9B%86%E6%9E%B6%E6%A7%8B">指令集体系结构（ISA）</a> 的差异，甚至是一些微小的<a href="https://zh.wikipedia.org/wiki/%E5%BA%94%E7%94%A8%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%8E%A5%E5%8F%A3">二进制应用接口（ABI）</a>的差异，总之是<strong>运行时环境</strong>的差异。用通俗的语言来表达，可以说即使同是机器语言，不同的机器所能应用的却是略有不同的「方言」（ABI/操作系统差异），乃至完全不通的「外语」（指令集差异）。</p>
<p>但是，平台差异导致程序不能跨平台运行，对于用户可能只是多下载一份二进制文件的功夫，而对于程序员则是一个大麻烦。程序员希望自己只需要编写并构建一次，就可以得到能在所有平台上运行的程序，而不是针对每个平台各自构建一份程序甚至各自编写一份代码。这种程序跨平台的能力，曾经被总结为一个口号「Build once, run everywhere」（构建一次，到处运行）。</p>
<p>但是，由上文介绍的 C/C++ 构建流程可以看出，C/C++ 天生难以做到所谓「构建一次，到处运行」的特性——因为它们的构建目标是真正的机器代码，而我们说过，不同平台的机器语言可能有差异，甚至完全不互通。</p>
<details class="info" open="open">
<summary>兼容技术</summary>
<p>平台与应用的支持是相互的：应用需要支持用户使用平台，而平台也需要支持用户使用的程序。而应用或限于成本或限于时间等原因，有时不会广泛支持需要运行该应用的平台，于是平台间就会形成应用壁垒，而产生所谓的「平台生态」问题。</p>
<p>平台生态的重要性不言而喻：大家常说苹果手机「应用生态好」，就是指 iOS 平台独占的高质量应用较多；前阵子 Mac 从 x86 指令集转移到 ARM 指令集，使得原有的应用生态受到打击；国产 CPU、国产操作系统等国产平台也因为支持的应用较少而面临严重的生态问题；Windows Phone 则因为在升级时不兼容老版平台的应用而被市场淘汰出局。</p>
<p>因此，平台有时需要想办法具有运行只支持另一平台的程序（也就是「兼容」它们）。</p>
<p>要兼容不同平台的程序，常见的方法有三种：</p>
<ul>
<li>兼容层。</li>
<li><strong>虚拟机（Virtual Machine），或模拟器（Emulator）。</strong>简单来说，虚拟机和模拟器是一种<strong>模拟物理计算机</strong>运行的软件。</li>
<li>二进制翻译。上述 Mac 迁移到 Arm 指令集之后，为缓解对其平台的影响，采用了 Rosetta2 动态二进制转义系统（之所以是2，是因为苹果曾经也从 PowerPC 指令集切换到 x86 指令集）</li>
</ul>
<p>P.S. 据说 yzh 从事过这方面的研究。</p>
</details>
<p>如果世界上只有 Windows、Android 等几个平台还好，但是</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 Problem-Solving (2023) TA Team
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.indexes", "content.tooltips"], "search": "../../../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
        
          <script src="../../../../javascripts/config.js"></script>
        
      
        
          <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        
      
        
          <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
        
      
    
  </body>
</html>